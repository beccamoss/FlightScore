{% extends 'base.html' %}
{% block content %}

<div class="row">
<div class="col-lg-8 col-lg-offset-2">
<h1>FlightScore</h1> 
<h3>Search Results</h3>
</div>
</div>

<div class="row">
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 hidden-xs">
<table class="table table-striped sortable">
<thead>
    <tr>
        <th>Score</th>
        <th>Price</th>
        <th>Airline</th>
        <th class="sorttable_nosort">Flight</th>
        <th class="sorttable_nosort">From</th>
        <th class="sorttable_nosort">To</th>
        <th>Depart</th>
        <th>Arrive</th>
    </tr>
</thead>
<tbody id="flights">
    {% for flight in results %}
    <tr>
        <td>
          <!-- Trigger the modal with a button -->
          <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target=#{{ flight['airline_code']+flight['flight_num'] }}>
            <meter value="{{ flight["score"] }}" min="0" max = "100" low = "25" high = "80" optimum = "85"></meter> {{ flight["score"] }}
              
          </button>
        
            <!-- Modal -->
          <div class="modal fade" id={{ flight['airline_code']+flight['flight_num'] }} role="dialog">
            <div class="modal-dialog modal-sm">
            
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">2017 Stats on Similar Flights</h4>
                </div>
                <div class="modal-body">
                    <table>
                      <tr><td>Number of Flights: </td><td style='padding-left:8px'>{{ flight['num_flights'] }}</td></tr>
                      <tr><td>% Flights Delayed: </td><td style='padding-left:8px'>{{ flight['percent_delay'] }}%</td></tr>
                      <tr><td>Average Delay in Minutes: </td><td style='padding-left:8px'>{{ flight['avg_delay'] }}</td></tr>
                      <tr><td>% Flights Cancelled: </td><td style='padding-left:8px'>{{ flight['percent_cancel_divert'] }}%</td></tr>
                    </table>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
              
            </div>
          </div>
        </td>
        <!-- <td>{{ flight["score"]}}</td> -->
        <td>${{ flight["price"][3:] }}</td>
        <td>{{ flight['carrier'][0] }}</td>
        <td>{{ flight['airline_code'] }} #{{ flight['flight_num'] }}</td>
        <td>{{ flight['origin_code'] }} - {{ origin }}</td>
        <td>{{ flight['destination_code'] }} - {{ destination }}</td>
        <td>{{ flight['departure_datetime'] }}</td>
        <td>{{ flight['arrival_datetime'] }}</td>
    </tr>
    {% endfor %}
</tbody>
</table>

</div>
</div>
{% endblock %}